<html>


<iframe id="existing-iframe-example"
        width="640" height="360"
        src="https://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1"
        frameborder="0"
        style="border: solid 4px #37474F"
></iframe>

<script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script type="text/javascript">

var socket = io.connect('http://127.0.0.1:5000');
socket.on('connect', function connect() {
		alert('Connected');
		socket.emit('message', "Connected to FLASK");	
	});

var tag = document.createElement('script');
tag.id = 'iframe-demo';
tag.src = 'https://www.youtube.com/iframe_api';
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
		function onYouTubeIframeAPIReady() {
			player = new YT.Player('existing-iframe-example', {
				events: {
					'onReady': onPlayerReady,
				}
			});
		}
		function onPlayerReady(event) {
			document.getElementById('existing-iframe-example').style.borderColor = '#FF6D00';
		}

socket.on('message', function (data) {
	if(data === "slow"){
		player.setPlaybackRate(1);
		player.setVolume(100);
	}
	else if(data === "fast"){
		player.setPlaybackRate(2);
		player.setVolume(50);
	}
});

setInterval(function(){ socket.emit('message', "Changed State"); }, 3000);
var speeds = [0.25,0.5,1,1.25,1.5,2]


</script>


</html>
